#!/usr/bin/env python
import websocket
import sys
import simplejson

def handle(message):
    msg = simplejson.loads(message)
    if 'up' in msg:
        a = msg['up']
        print "Up: %(addr)s %(name)s %(time)s %(uptime)s" % a
    if 'down' in msg:
        a = msg['down']
        print "Down: %(addr)s %(name)s %(time)s" % a
        

def watch():
    ws = websocket.create_connection("ws://localhost:8888/websocket")
    while True:
        data = ws.recv()
        handle(data)

if __name__ == "__main__":
    watch()
